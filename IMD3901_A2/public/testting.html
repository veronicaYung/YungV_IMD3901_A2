<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    <script src="js/pickup.js"></script> 
    <script src="js/createBoxes.js"></script>  
    <script src="js/deleteBoxes.js"></script> 
</head>
<body>
    <a-scene>
        <a-assets>
            <a-asset-item id="crateModel" response-type="arraybuffer"  src="assets/crate/scene.gltf"></a-asset-item>
        </a-assets>

        <!--camera and lights-->
        <a-entity id="camera" position="0 1.6 0" camera wasd-controls look-controls>
            <a-entity cursor="rayOrigin:mouse;" raycaster="far:20; interval:20; objects:.interactive;" id="cursor"></a-entity>
            <!--lights-->
            <a-entity position="0.5 -0.5 0" light="type:spot; intensity:1.4; angle:40; penumbra:0.3; castShadow:true; shadowBias:-0.0005"></a-entity>
            <a-box id="attachedBox" position="0 -0.8 -1" material="src: url(assets/hay_bale/textures/Hay_bale_baseColor.png)" visible="false"></a-box>
            
        </a-entity>

        <!-- Import Crates -->
        <a-entity class="crateGroup" position="-7.724 0 -6.504" scale = "2 2 2">
            <a-entity position="-2 0 -2" scale="0.5 0.5 0.5" gltf-model="#crateModel" pickup></a-entity>
            <a-entity position="-1.3 0 -2" scale="0.5 0.5 0.5" gltf-model="#crateModel" pickup></a-entity>
            <a-entity position="-1.6 0.8 -2" scale="0.5 0.5 0.5" gltf-model="#crateModel" pickup></a-entity>
        </a-entity>
        <a-entity class="crateGroup" position="13.882 0 -6.504" scale = "2 2 2">
            <a-entity position="-2 0 -2" scale="0.5 0.5 0.5" gltf-model="#crateModel" pickup></a-entity>
            <a-entity position="-1.3 0 -2" scale="0.5 0.5 0.5" gltf-model="#crateModel" pickup></a-entity>
            <a-entity position="-1.6 0.8 -2" scale="0.5 0.5 0.5" gltf-model="#crateModel" pickup></a-entity>
        </a-entity>


        <!-- Box Creation Plaque -->
        <a-entity id="createPlaque" position="0 0.5 -4" rotation="-30 0 0" scale="1 1 1">
         
            <a-entity position="0 0.165 -0.015"
                geometry="primitive: box; width: 3.0; height: 1.2; depth: 0.2"
                material="color: white"
                shadow="cast:true; receive:true;"></a-entity>
        
            <a-entity position="0.026 0.669 0.107" text="value:Box Creation;
                color: black; font: roboto; width: 1.3; align: center; baseline:top; wrapCount:12;"></a-entity>
        
            <a-entity position="0.049 0.302 0.154" text="value:Press the red button to create a new box randomly placed in this room;
                color: black; font: roboto; width: 1.25; align: center; baseline:top; wrapCount:18;"></a-entity>
        </a-entity>
       
        <!--create box button-->
        <a-entity id="createBox_button" position = "0 0 -1.8" >
            <a-entity class="button interactive" position="0 0.6 0"
                createboxes
                geometry = "primitive:cylinder; radius: 0.15; height: 0.2;"
                material = "color:rgb(255,100,100);"
                animation__mouseenter="property:material.color; type:color; to:rgb(255,0,0); startEvents:mouseenter; dur:200;"
                animation__mouseleave="property:material.color; type:color; to:rgb(255,100,100); startEvents:mouseleave; dur:200;"
                animation__click="property:position.y; from:0.55; to:0.6; startEvents:click; dur:300;">
            </a-entity>
            <a-entity position="0 0.3 0" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;"
            material="color:white;"></a-entity>
        </a-entity>

         <!-- Deletion Button Plaque -->
        <a-entity id="deletePlaque" position="4 0.686 0" rotation="-30 -90 0" scale = "1 1 1">

            <a-entity position = "0 0 -0.11"
                  geometry = "primitive:box; width: 3.0; height: 1.2; depth: 0.2;"
                  material = "color:white;">
            </a-entity>

            <a-entity position = "-0.0047 0.5 0.01" text = "value:Box Deletion; 
                      color: black; font: roboto; width: 1.25; align: center;  baseline: top; wrapCount: 18;">
            </a-entity>

            <a-entity position = "-0.03 0.25 0.01" text = "value:Press this button to remove all created boxes; 
                      color: black; font: roboto; width: 1.25; align: center; baseline: top; wrapCount: 18;">
            </a-entity>

        </a-entity>
         <!--delete box button-->
         <a-entity id="deleteBox_button" position = "2.349 0 -0.114" >
            <a-entity class="button interactive" position="0 0.6 0"
                deleteboxes
                geometry = "primitive:cylinder; radius: 0.15; height: 0.2;"
                material = "color:rgb(100,100,255);"
                animation__mouseenter="property:material.color; type:color; to:rgb(0,0,255); startEvents:mouseenter; dur:200;"
                animation__mouseleave="property:material.color; type:color; to:rgb(100,100,255); startEvents:mouseleave; dur:200;"
                animation__click="property:position.y; from:0.55; to:0.6; startEvents:click; dur:300;">
            </a-entity>
            <a-entity position="0 0.3 0" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;"
            material="color:white;"></a-entity>
        </a-entity>


         <!-- add a room -->
         <a-entity id = "room" shadow="cast:false; receive:true;">
            <a-entity class = "ground" position = "0 0.08 0" rotation="-90 0 0" geometry="primitive:plane; width:26; height:26;" material = "color:white"></a-entity>
            <a-entity id = "walls">
                <a-entity class="wall" position="13.431 8 0" rotation="0 -90 0" geometry="primitive: box; width: 30; height: 3;" scale = "1 -5.485 1" material="color: white"></a-entity>
                <a-entity class="wall" position="-13.506 8 0" rotation="0 90 0" geometry="primitive: box; width: 30; height: 3;" scale = "1 -5.485 1 " material="color: white"></a-entity>
                <a-entity class="wall" position="0 8 13.427" rotation="0 180 0" geometry="primitive: box; width: 30; height: 3;" scale =" 1 -5.485 1" material="color: white"></a-entity>
                <a-entity class="wall" position="0 8 -13.462" rotation="0 0 0" geometry="primitive: box; width: 30; height: 3;" scale = "1 -5.485 1" material="color: white"></a-entity>
            </a-entity>     
        </a-entity>


        <!-- <a-box class="interactive" pickup id="box" position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box> -->


        <a-entity environment="preset:starry"></a-entity>
    </a-scene>

    <!-- <script>
        var box = document.querySelector('#box');
        var attachedBox = document.querySelector('#attachedBox');
        var cursor = document.querySelector('#cursor');
        var camera = document.querySelector('#camera');
        var isPickedUp = false;
        var isIntersecting = false;

        cursor.addEventListener('raycaster-intersection', function () {
            isIntersecting = true;
        });

        cursor.addEventListener('raycaster-intersection-cleared', function () {
            isIntersecting = false;
        });

        window.addEventListener('mousedown', function () {
            if (!isPickedUp && isIntersecting) {
                box.setAttribute('visible', 'false');
                attachedBox.setAttribute('visible', 'true');
                isPickedUp = true;
            }
        });

        window.addEventListener('mouseup', function () {
            if (isPickedUp) {
                var cameraDirection = camera.object3D.getWorldDirection(new THREE.Vector3());
                var dropPosition = cameraDirection.multiplyScalar(-1).add(camera.object3D.position);
                dropPosition.y -= 0.5;
                box.setAttribute('position', dropPosition);
                box.setAttribute('visible', 'true');
                attachedBox.setAttribute('visible', 'false');
                isPickedUp = false;
            }
        });
    </script> -->

</body>
</html>